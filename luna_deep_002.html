<!DOCTYPE html>
<html>
<head>
    <title>Calcolo Effemeridi Lunari Mensili</title>
    <style>
        table { border-collapse: collapse; margin: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <input type="date" id="inputData" value="2025-02-01">
    <button onclick="generaTabellaMensile()">Calcola</button>
    <div id="risultato"></div>

    <script>
        // Funzione principale per generare la tabella mensile
        function generaTabellaMensile() {
            const dataInput = document.getElementById('inputData').value;
            const dataRiferimento = new Date(dataInput);
            const anno = dataRiferimento.getFullYear();
            const mese = dataRiferimento.getMonth(); // 0-11 (gennaio=0)

            // Calcola il numero di giorni nel mese
            const ultimoGiorno = new Date(anno, mese + 1, 0).getDate();

            // Genera la tabella HTML
            let tabellaHTML = `
                <table>
                    <tr>
                        <th>Data</th>
                        <th>Culminazione</th>
                        <th>Alba</th>
                        <th>Tramonto</th>
                        <th>Altitudine Culm.</th>
                    </tr>
            `;

            // Calcola gli orari per ogni giorno del mese
            for (let giorno = 1; giorno <= ultimoGiorno; giorno++) {
                const data = new Date(anno, mese, giorno);
                
                // Esempio di calcolo (sostituire con le tue funzioni)
                const culminazione = calcolaCulminazione(data);
                const alba = calcolaAlbaLunare(data);
                const tramonto = calcolaTramontoLunare(data);
                const altitudine = calcolaAltitudineCulminazione(data);

                // Aggiungi una riga alla tabella
                tabellaHTML += `
                    <tr>
                        <td>${formattaData(data)}</td>
                        <td>${culminazione}</td>
                        <td>${alba}</td>
                        <td>${tramonto}</td>
                        <td>${altitudine}Â°</td>
                    </tr>
                `;
            }

            tabellaHTML += "</table>";
            document.getElementById('risultato').innerHTML = tabellaHTML;
        }

        // Funzioni di esempio (da sostituire con il tuo codice esistente)
        function calcolaCulminazione(data) {
            // Implementa qui il calcolo della culminazione
            return "12:34";
        }

        function calcolaAlbaLunare(data) {
            // Implementa qui il calcolo dell'alba lunare
            return "06:12";
        }

        function calcolaTramontoLunare(data) {
            // Implementa qui il calcolo del tramonto lunare
            return "20:45";
        }

        function calcolaAltitudineCulminazione(data) {
            // Implementa qui il calcolo dell'altitudine
            return "62.5";
        }

        function formattaData(data) {
            return data.toLocaleDateString('it-IT', { day: '2-digit', month: '2-digit', year: 'numeric' });
        }
    </script>
</body>
</html>
