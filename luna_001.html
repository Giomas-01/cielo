<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Culminazione della Luna - Milano (1 Feb 2025)</title>
    <script src="https://cdn.jsdelivr.net/npm/astro.js"></script>
</head>
<body>
    <h1>Culminazione della Luna - Milano (1 Feb 2025)  15:31</h1>
    <p id="culminationTime">Caricamento...</p>

    <script>
        // Milano: latitudine 45.45, longitudine 9.19
        const latitude = 45.45;
        const longitude = 9.19;
        const date = new Date('2025-02-01T00:00:00Z'); // 1 Febbraio 2025

        // Funzione per calcolare la culminazione della Luna usando Astro.js
        function calculateMoonCulmination() {
            // Calcola l'ora siderea per la longitudine
            const siderealTime = Astro.sideralTime(date, longitude);

            // Calcola l'ascensione retta e declinazione della Luna
            const moonPosition = Astro.moon(date);

            // Formula per calcolare la culminazione (transito locale)
            // Assumiamo che la culminazione avvenga quando l'ascensione retta della Luna coincide con l'ora siderea
            const culminationRA = moonPosition.ra;
            const culminationTime = siderealTime - culminationRA;

            // Converto il risultato in ore locali
            const culminationDate = new Date(date.getTime() + (culminationTime * 3600 * 1000)); // Converto in millisecondi

            // Ora in formato legibile
            const hours = culminationDate.getUTCHours();
            const minutes = culminationDate.getUTCMinutes();
            const timeString = `${hours}:${minutes < 10 ? '0' + minutes : minutes}`;

            document.getElementById("culminationTime").textContent = `Culminazione della Luna: ${timeString} UTC (milano time)`;
        }

        calculateMoonCulmination();
    </script>
</body>
</html>
