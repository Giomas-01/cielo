<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Culminazione della Luna - Milano (1 Feb 2025)  15:38</title>
</head>
<body>
    <h1>Culminazione della Luna - Milano (1 Feb 2025)</h1>
    <p id="culminationTime">Caricamento...</p>

    <script>
        // Funzione per calcolare la culminazione della Luna usando equazioni semplificate
        function calculateMoonCulmination() {
            // Parametri di base
            const latitude = 45.45;  // Milano (Latitudine)
            const longitude = 9.19;  // Milano (Longitudine)
            const date = new Date('2025-02-01T00:00:00Z'); // 1 Febbraio 2025

            // Calcolare il giorno dell'anno
            const startOfYear = new Date('2025-01-01T00:00:00Z');
            const dayOfYear = Math.floor((date - startOfYear) / (1000 * 60 * 60 * 24)) + 1;

            // Fase lunare
            const T = (dayOfYear - 1) / 36525; // Tempo Julian
            const L0 = 280.46646 + 36000.76983 * T;  // Longitudine del Sole
            const M = 357.52911 + 35999.05029 * T;  // Anomalia del Sole

            // Calcolo della longitudine della Luna
            const L = 218.31617 + 481267.88134 * T;  // Longitudine della Luna
            const D = 297.85036 + 445267.11148 * T;  // Longitudine della perigeo lunare

            // Calcoliamo la culminazione della Luna in ore
            let culminationTimeUTC = 12.0 + (L - 180.0) / 360.0 * 24; // Calcoliamo l'ora UTC della culminazione

            // Convertiamo il risultato in ore locali (CET = UTC + 1)
            const culminationTimeCET = culminationTimeUTC + 1;  // Milano è UTC +1

            // Convertiamo l'ora in formato leggibile
            const hours = Math.floor(culminationTimeCET);
            const minutes = Math.round((culminationTimeCET - hours) * 60);
            const timeString = `${hours}:${minutes < 10 ? '0' + minutes : minutes}`;

            // Mostriamo l'orario di culminazione
            document.getElementById("culminationTime").textContent = `Culminazione della Luna: ${timeString} CET`;
        }

        // Calcoliamo la culminazione quando la pagina è pronta
        window.onload = calculateMoonCulmination;
    </script>
</body>
</html>
