<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcolo Culminazione della Luna</title>
    <script src="astronomy.min.js"></script>
    <script>
        function calculateMoonCulmination() {
            const latitude = 45.45; // Latitudine di Milano
            const longitude = 9.19; // Longitudine di Milano
            const date = new Date("2025-02-01T00:00:00Z"); // Data specificata

            const observer = new Astronomy.Observer(latitude, longitude, 0);

            // Correzione: Usa Search for Moon Culmination
            const culmination = Astronomy.SearchMoonCulmination(observer, date);

            if (culmination) {
                // Convertiamo l'ora UTC in CET (UTC + 1)
                const culminationCET = new Date(culmination.getTime() + 3600 * 1000);

                const hours = culminationCET.getUTCHours().toString().padStart(2, '0');
                const minutes = culminationCET.getUTCMinutes().toString().padStart(2, '0');
                const seconds = culminationCET.getUTCSeconds().toString().padStart(2, '0');

                const result = `${hours}:${minutes}:${seconds} CET`;

                document.getElementById("culminationTime").innerText = `Culminazione della Luna: ${result}`;
            } else {
                document.getElementById("culminationTime").innerText = "Culminazione non trovata per questa data.";
            }
        }
    </script>
</head>

<body>
    <h1>Calcolo Culminazione della Luna  16:51</h1>
    <p>Data: 1 Febbraio 2025</p>
    <p id="culminationTime">Culminazione della Luna: Caricamento...</p>
    <button onclick="calculateMoonCulmination()">Calcola Culminazione</button>
</body>

</html>
